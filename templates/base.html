<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CampusEye | Surveillance</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="{{url_for('static', filename='css/styles.css')}}" />
  
  <script src="https://kit.fontawesome.com/61ff2b6ee8.js" crossorigin="anonymous"></script>

  </head>

<body>
  <div class="page-wrapper">
    <header>
      <div class="brand-logo">
        <i class="fa-solid fa-eye-low-vision"></i>
        <span>CampusEye</span>
      </div>
      
      <nav>
        <a class="nav-link {{'active' if active_page == 'index' else ''}}" href="/">
          <i class="fa-solid fa-chart-line"></i> Dashboard
        </a>
        <a class="nav-link {{'active' if active_page == 'student_form' else ''}}" href="/add-student">
          <i class="fa-solid fa-user-plus"></i> Add Student
        </a>
      </nav>
    </header>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="flash-msg {{category}}">
      {% set category_icon = 'fa-circle-check' if category == 'success' else 'fa-circle-xmark' %}
      <i class="msg-icon fa-solid {{category_icon}}"></i>
      <div>
        <span class="msg-title">{{category}}</span>
        <span class="msg-content">{{message}}</span>
      </div>
      <button onclick="removeFlashMessage()" class="msg-close-btn">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <div class="content-container">
      {% block main %} {% endblock %}
    </div>

    <footer>
      <div class="footer-content">
        <p class="copyright">&copy; 2025 <strong>CampusEye</strong>. All Rights Reserved.</p>
        <div class="divider"></div>
        <p class="developers">Developed by <span class="dev-name">Reshmitha</span>, <span class="dev-name">Pavan</span>, <span class="dev-name">Yaswanth</span>, <span class="dev-name">Govind</span></p>
      </div>
    </footer>
  </div>

  <script>
    function removeFlashMessage() {
      const msg = document.querySelector('.flash-msg');
      if(msg) msg.remove();
    }
    // Auto-remove flash messages after 4 seconds
    setTimeout(() => { removeFlashMessage() }, 4000);
  </script>
</body>
</html>